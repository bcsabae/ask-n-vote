import{_ as U}from"./AppLayout-DCHSzDE-.js";import{s as r}from"./index-C4H-QJQX.js";import{s as V,a as z}from"./index-B_g12OVf.js";import{L as I,d as w,y as L,q as T,J as F,z as l,M as Q,o as c,c as j,w as y,g as b,t as o,a as e,b as n,u as a,N as E,e as u,h as x,F as g,n as G,l as p}from"./app-BDusPxOz.js";import"./ThemeToggle-P2DsK4pt.js";import"./index-DUfUUQwL.js";const M={class:"flex flex-row gap-x-6 items-center justify-between"},R={class:"font-bold text-xl"},J={class:"flex flex-row gap-x-4 items-center"},P={class:"text-sm"},Y={class:"font-bold text-xl"},H={class:"mt-12"},K=e("div",{class:"w-full border-b-gray-800 border-b py-4 mb-8 text-2xl"},[e("h3",null,"Active questions")],-1),O={class:"table-auto w-full text-left"},W=e("thead",{class:"uppercase"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Upvotes"),e("th",{class:"px-6 py-4"},"Text"),e("th",{class:"px-6 py-4"},"Asked by"),e("th",{class:"px-6 py-4"},"Actions")])],-1),X={class:"px-6 py-2"},Z={class:"px-6 py-2"},ee={class:"px-6 py-2"},se={class:"px-6 py-2"},te={class:"mt-12"},oe=e("div",{class:"w-full border-b-gray-800 border-b py-4 mb-8 text-2xl"},[e("h3",null,"Answered questions")],-1),ae={class:"table-auto w-full text-left text-gray-500"},ne=e("thead",{class:"uppercase"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Upvotes"),e("th",{class:"px-6 py-4"},"Text"),e("th",{class:"px-6 py-4"},"Asked by"),e("th",{class:"px-6 py-4"},"Actions")])],-1),le={class:"px-6 py-2"},ie={class:"px-6 py-2"},re={class:"px-6 py-2"},ce={class:"px-6 py-2"},de={class:"mt-12"},ue=e("div",{class:"w-full border-b-gray-800 border-b py-4 mb-8 text-2xl"},[e("h3",null,"Banned guests")],-1),pe={class:"table-auto w-full text-left text-gray-500"},_e=e("thead",{class:"uppercase"},[e("tr",null,[e("th",{class:"px-6 py-4"},"Name"),e("th",{class:"px-6 py-4"},"Actions")])],-1),ve={class:"px-6 py-2"},he={class:"px-6 py-2"},ye={class:"flex flex-row items-center text-gray-200"},we={__name:"SessionDashboard",props:["session_code","active_questions","answered_questions","guest_count","banned_guests"],setup(i){const _=i,C=I();let v=w(_.session_code.is_active===1),m=w();L(()=>_.session_code.is_active,t=>{console.log("changed to "+t),v=t===1}),T(()=>{m=setInterval(()=>{q()},3e3)}),F(()=>{clearInterval(m)});function S(){l.patch(route("sessions.update",_.session_code.id),{is_active:!_.session_code.is_active},{preserveScroll:!0})}function A(){l.delete(route("sessions.destroy",_.session_code.id),{preserveScroll:!0,onSuccess:()=>{l.visit(route("sessions"))}})}function f(t){console.log("banning "+t),l.patch(route("guest.ban",t),{ban:!0},{preserveScroll:!0})}function D(t){l.patch(route("questions.update",t),{is_answered:!0},{preserveScroll:!0})}function B(t){l.delete(route("questions.destroy",t),{preserveScroll:!0})}function $(t){l.patch(route("questions.update",t),{is_answered:!1},{preserveScroll:!0})}function q(){l.reload({preserveState:!0,preserveScroll:!0})}const N=()=>{C.require({group:"templating",header:"Are you sure?",message:"You are going to delete this session. This cannot be undone.",icon:"pi pi-exclamation-circle",rejectProps:{label:"Cancel",outlined:!0,size:"small",severity:"secondary"},acceptProps:{label:"Delete",icon:"pi pi-times",size:"small",severity:"danger"},accept:()=>{A()}})};return(t,k)=>{const d=Q("tooltip");return c(),j(U,{title:"Dashboard"},{header:y(()=>[b(" Session: "+o(i.session_code.title),1)]),default:y(()=>[e("div",M,[e("p",R," Code: "+o(i.session_code.session_code),1),e("div",J,[e("div",P,[n(a(V),{modelValue:a(v),"onUpdate:modelValue":k[0]||(k[0]=s=>E(v)?v.value=s:v=s),onLabel:"Active",offLabel:"Inactive",onChange:S},null,8,["modelValue"])]),n(a(r),{icon:"pi pi-times",severity:"secondary",text:"",rounded:"","aria-label":"Delete",onClick:N})])]),e("p",Y," Guests in session: "+o(i.guest_count),1),e("div",H,[K,e("table",O,[W,e("tbody",null,[(c(!0),u(g,null,x(i.active_questions,s=>(c(),u("tr",{key:s.id,class:"dark:hover:bg-gray-700 hover:bg-gray-100"},[e("td",X,o(s.upvotes),1),e("td",Z,o(s.question_text),1),e("td",ee,[b(o(s.guest.name)+" ",1),p(n(a(r),{icon:"pi pi-ban",severity:"secondary",text:"","aria-label":"Ban user",onClick:h=>f(s.guest.id)},null,8,["onClick"]),[[d,"ban user",void 0,{top:!0}]])]),e("td",se,[p(n(a(r),{icon:"pi pi-check",severity:"secondary",text:"","aria-label":"Answer question",onClick:h=>D(s.id)},null,8,["onClick"]),[[d,"answer",void 0,{top:!0}]]),p(n(a(r),{icon:"pi pi-times",severity:"secondary",text:"","aria-label":"Delete question",onClick:h=>B(s.id)},null,8,["onClick"]),[[d,"delete",void 0,{top:!0}]])])]))),128))])])]),e("div",te,[oe,e("table",ae,[ne,e("tbody",null,[(c(!0),u(g,null,x(i.answered_questions,s=>(c(),u("tr",{key:s.id,class:"dark:hover:bg-gray-700 hover:bg-gray-100"},[e("td",le,o(s.upvotes),1),e("td",ie,o(s.question_text),1),e("td",re,[b(o(s.guest.name)+" ",1),p(n(a(r),{icon:"pi pi-ban",severity:"secondary",text:"","aria-label":"Ban user",onClick:h=>f(s.guest.id)},null,8,["onClick"]),[[d,"ban user",void 0,{top:!0}]])]),e("td",ce,[p(n(a(r),{icon:"pi pi-undo",severity:"secondary",text:"","aria-label":"Reopen question",onClick:h=>$(s.id)},null,8,["onClick"]),[[d,"reopen",void 0,{top:!0}]])])]))),128))])])]),e("div",de,[ue,e("table",pe,[_e,e("tbody",null,[(c(!0),u(g,null,x(i.banned_guests,s=>(c(),u("tr",{key:s.id,class:"dark:hover:bg-gray-700 hover:bg-gray-100"},[e("td",ve,o(s.name),1),e("td",he,[p(n(a(r),{icon:"pi pi-undo",severity:"secondary",text:"","aria-label":"Enable guest",onClick:h=>t.enableGuest(s.id)},null,8,["onClick"]),[[d,"enable",void 0,{top:!0}]])])]))),128))])])]),n(a(z),{group:"templating"},{message:y(s=>[e("div",ye,[e("i",{class:G([s.message.icon,"py-2 px-4"])},null,2),e("p",null,o(s.message.message),1)])]),_:1})]),_:1})}}};export{we as default};
